<div class="prelevement-mobile-container">
    <h2>üì¶ Pr√©l√®vement des V√©hicules</h2>
  
    <mat-form-field class="full-width">
      <mat-label>Num√©ro d'Ordre de Mission</mat-label>
      <input matInput [(ngModel)]="ordreMission" placeholder="Saisir ou scanner" (change)="chargerOrdreMission()">
    </mat-form-field>
  
   

    <mat-progress-bar *ngIf="isLoading" mode="indeterminate" color="accent"></mat-progress-bar>
        
        <!-- Bouton -->
        <div *ngIf="ordreMission && ordreMission.trim() !== ''">
        
        
          <!-- Saisie manuelle -->
          <mat-form-field class="full-width">
            <mat-label>Num√©ro de Ch√¢ssis</mat-label>
            <input matInput
                   placeholder="Saisir manuellement"
                   [(ngModel)]="numeroChassisSaisi"
                   (ngModelChange)="onNumeroChassisChange($event)">
          </mat-form-field>

        <!-- ‚úÖ Zone de scan -->
        <div class="scanner-wrapper" *ngIf="scannerStarted">
          <div id="reader"></div>
          <button class="close-scanner" (click)="stopScanner()">‚ùå Fermer Scanner</button>
        </div>
    <div *ngIf="vehicules.length > 0" class="vehicules-list">
      <h3>üöó V√©hicules √† Pr√©lever</h3>
      <mat-card *ngFor="let vehicule of vehicules" [ngClass]="{'vehicule-card': true, 'preleve': vehicule.preleve}">
        <mat-card-content>
          <p><strong>Ch√¢ssis :</strong> {{ vehicule.numeroChassis }}</p>
          <p><strong>Mod√®le :</strong> {{ vehicule.modele }}</p>
          <p><strong>Marque :</strong> {{ vehicule.shortDescription }}</p>

          <p><strong>Couleur :</strong> {{ vehicule.shortColor }}</p>

          <mat-chip [color]="vehicule.preleve ? 'primary' : 'warn'" selected>
            <mat-icon class="chip-icon">{{ vehicule.preleve ? 'check_circle' : 'hourglass_empty' }}</mat-icon>
            {{ vehicule.preleve ? 'Pr√©lev√©' : 'Non Pr√©lev√©' }}
          </mat-chip>
  
          <mat-chip *ngIf="vehicule.justScanned" color="accent">
            üöÄ Nouveau
          </mat-chip>
        </mat-card-content>
      </mat-card>
    </div>
  
    <div *ngIf="vehiculesManquants.length > 0" class="vehicules-manquants">
      <h3>‚ö†Ô∏è V√©hicules non trouv√©s</h3>
      <ul>
        <li *ngFor="let vehicule of vehiculesManquants">
          {{ vehicule.numeroChassis }} - {{ vehicule.modele }}
        </li>
      </ul>
    </div>
  
    <div class="action-buttons">
      <button mat-raised-button color="primary" (click)="validerPrelevement()" [disabled]="!peutValiderPrelevement()">
        ‚úÖ Valider le Pr√©l√®vement
      </button>
    </div>
  </div>
  