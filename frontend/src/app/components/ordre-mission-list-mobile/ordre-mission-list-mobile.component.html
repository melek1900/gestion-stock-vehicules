<div class="ordre-mission-mobile-container">
    <h2>ğŸ“œ Liste des Ordres de Mission</h2>
  
    <!-- âœ… Barre sticky -->
    <div class="sticky-bar">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>ğŸ” Rechercher NÂ° Mission</mat-label>
        <input matInput [(ngModel)]="recherche" (input)="filtrerOrdres()">
      </mat-form-field>
  
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>ğŸ“Œ Filtrer par statut</mat-label>
        <mat-select [(ngModel)]="statutFiltre" (selectionChange)="filtrerOrdres()">
          <mat-option value="">Tous</mat-option>
          <mat-option value="EN_COURS">En cours</mat-option>
          <mat-option value="CLOTURE">ClÃ´turÃ©</mat-option>
          <mat-option value="PARTIELLE">Partielle</mat-option> <!-- âœ… Ã€ ajouter -->
        </mat-select>
      </mat-form-field>
    </div>
  
    <!-- âœ… Liste des ordres -->
    <div class="ordre-list">
      <mat-card *ngFor="let ordre of ordresMissionFiltres" class="ordre-card" [attr.data-statut]="ordre.statut">
        <mat-card-content>
          <div class="mission-header">
            <h3>ğŸ“Œ Mission #{{ ordre.numeroOrdre }}</h3>
            <button mat-icon-button (click)="afficherOrdreMission('/api/ordres-mission/' + ordre.id + '/pdf')" aria-label="TÃ©lÃ©charger PDF">
              <mat-icon>picture_as_pdf</mat-icon>
            </button>
          </div>
          <p><strong>ğŸ“… Date :</strong> {{ ordre.dateCreation | date:'dd/MM/yyyy' }}</p>
          <p><strong>ğŸšš VÃ©hicule :</strong> {{ ordre.vehiculeTransport.matricule }} - {{ ordre.vehiculeTransport.type }}</p>
          <p><strong>ğŸ§‘â€âœˆï¸ Chauffeur :</strong> {{ ordre.chauffeur.nom }} {{ ordre.chauffeur.prenom }}</p>
          <p><strong>ğŸ Parc DÃ©part :</strong> {{ ordre.parcDepart.nom }}</p>
          <p><strong>ğŸ¯ Parc ArrivÃ©e :</strong> {{ ordre.parcArrivee.nom }}</p>
  
          <mat-chip
          [color]="
            ordre.statut === 'EN_COURS'
              ? 'warn'
              : ordre.statut === 'PARTIELLE'
              ? 'accent'
              : 'primary'
          ">
          {{ ordre.statut === 'EN_COURS' ? 'En cours' : ordre.statut === 'PARTIELLE' ? 'Partielle' : 'ClÃ´turÃ©' }}
        </mat-chip>
        </mat-card-content>
  
        <mat-card-actions>
          <button mat-raised-button color="primary" (click)="ouvrirDialogDetails(ordre)">
            ğŸ“„ Voir Mission
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
  